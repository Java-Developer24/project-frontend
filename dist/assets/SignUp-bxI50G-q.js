import{A as V,r as o,u as B,b as I,_ as d,j as e,L as m,B as u,I as H,c as _}from"./index-DAkEzVty.js";import{C as F,a as q,b as T,c as U}from"./Card-ChcJ8QrX.js";import{I as p}from"./Input-CSgOxdAe.js";import{u as Y,E as y,a as N,_ as G}from"./index-BZ92oaWA.js";import{u as x,e as R,p as D,c as O}from"./validators-DibjgpzM.js";const $=()=>{const[h,C]=o.useState(!1),[f,A]=o.useState(!1),[i,S]=o.useState(""),[P,g]=o.useState(!1),w=Y(),s=x("",R),r=x("",D),l=x("",a=>O(a,r.value)),n=B(),{login:j}=o.useContext(I);o.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("token");t&&(j(t),d.success("Login successful!"),n("/",{replace:!0}))},[j,n]);const v=a=>a(t=>!t),k=async a=>{var t,b;if(a.preventDefault(),!i){d.error("Please complete the CAPTCHA");return}g(!0);try{const{data:c}=await _.post("/api/auth/signup",{email:s.value,password:r.value,confirmPassword:l.value,captcha:i},{withCredentials:!0});d.success(c.message||"Signup successful. Please verify your email to activate your account.",{autoClose:3e3}),n("/email-verify",{state:{email:s.value}})}catch(c){const L=((b=(t=c.response)==null?void 0:t.data)==null?void 0:b.message)||"Signup failed. Please try again.";d.error(L),w&&w.reset()}finally{g(!1)}},E=()=>{window.location.href="https://backendapi.tech-developer.online/api/auth/google/signup"};return e.jsx("div",{className:"h-[calc(100dvh-4rem)] flex items-center justify-center",children:e.jsxs(F,{className:"bg-[#121315] w-full max-w-md p-4 rounded-lg border-none dark",children:[e.jsx(q,{children:e.jsx(T,{className:"text-center font-medium",children:"Create Your Account"})}),e.jsxs(U,{className:"p-0 md:p-6 !pt-0",children:[e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email",className:"block text-sm text-[#9d9d9d]",children:"Email"}),e.jsx(p,{id:"email",type:"email",placeholder:"m@example.com",className:"w-full h-12 pl-3 rounded-lg bg-transparent border-[#e0effe]",value:s.value,onChange:s.changeHandler,required:!0}),s.error&&e.jsx("span",{className:"text-red-500 text-xs",children:s.error})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password",className:"block text-sm text-[#9d9d9d]",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"password",type:h?"text":"password",placeholder:"Enter your password",className:"w-full h-12 pl-3 pr-10 rounded-lg text-[#9d9d9d] placeholder-text-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:r.value,onChange:r.changeHandler,required:!0}),e.jsx("button",{type:"button",onClick:()=>v(C),className:"absolute inset-y-0 right-0 px-3 flex items-center",children:h?e.jsx(y,{className:"w-5 h-5 text-[#9d9d9d]"}):e.jsx(N,{className:"w-5 h-5 text-[#9d9d9d]"})})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"confirm-password",className:"block text-sm text-[#9d9d9d]",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"confirm-password",type:f?"text":"password",placeholder:"Confirm your password",className:"w-full h-12 pl-3 pr-10 rounded-lg text-[#9d9d9d] placeholder-text-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:l.value,onChange:l.changeHandler,required:!0}),e.jsx("button",{type:"button",onClick:()=>v(A),className:"absolute inset-y-0 right-0 px-3 flex items-center",children:f?e.jsx(y,{className:"w-5 h-5 text-[#9d9d9d]"}):e.jsx(N,{className:"w-5 h-5 text-[#9d9d9d]"})})]})]}),e.jsx("div",{className:"flex justify-center mb-4 mt-8",children:e.jsx(G,{sitekey:"0x4AAAAAAA1Y9hSf6wBjYC09",onVerify:a=>{S(a)},className:"scale-[0.85] md:transform-none"})}),e.jsx(u,{type:"submit",variant:"login",className:"w-full text-sm font-normal mb-4",isLoading:P,disabled:!i||!s.value||!r.value||!l.value||s.error||r.error||l.error,children:"Create Account"}),e.jsxs(u,{type:"button",variant:"outline",className:"w-full text-sm",onClick:E,children:[e.jsx(H.google,{className:"w-4 h-4 mr-1"})," Signup with Google"]})]})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-[#BEBEBF] font-normal",children:["Already have an account?"," ",e.jsx(u,{variant:"link",className:"!no-underline py-0 px-1 text-sm font-normal h-0",onClick:()=>n("/login"),children:"Login"})]})]})]})})},W=V()($);export{W as default};
